---
import '@src/index.css';

import { getCollection } from 'astro:content';
import { css } from '@styled-system/css';

import Navigation from '@src/components/Navigation.astro';
import Footer from '@src/components/Footer.astro';

export const prerender = true;

export async function getStaticPaths() {
  const entries = await getCollection('retrospect');

  return entries.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const mainStyles = css({
  minW: 'md',
  paddingInline: {
    base: '8',
    md: '8',
    lg: '16',
  },
  display: 'flex',
});

const contentStyles = css({
  fontWeight: 'bold',

  '& h1': {
    paddingBlock: '2',
    fontSize: {
      base: '2xl',
      md: '2xl',
      lg: '4xl',
    },
  },
  '& h2': {
    paddingBlock: '2',
    fontSize: {
      base: 'xl',
      md: 'xl',
      lg: '3xl',
    },
  },
  '& p': {
    paddingBlock: '1',
  },
  '& code': {},
});

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<html>
  <head>
    <meta charset="utf-8" />
  </head>
  <body>
    <Navigation />
    <main class={mainStyles}>
      <section class={contentStyles}>
        <Content />
      </section>
    </main>
    <Footer />
  </body>
</html>
